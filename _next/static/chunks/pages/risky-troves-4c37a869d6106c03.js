(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[647],{84578:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/risky-troves",function(){return c(35161)}])},35161:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return z}});var d=c(85893),e=c(47568),f=c(34051),g=c.n(f),h=c(67294),i=c(21043),j=function(a){var b=a.pageIndex,c=a.totalTroves,e=a.actions,f=a.nextPageAvailable,g=a.backPageAvailable;return(0,d.jsxs)("div",{className:"footer",children:[(0,d.jsxs)("div",{className:"page-info",children:[b*v," - ",(b+1)*v," of ",c]}),(0,d.jsxs)("div",{className:"pagination-section",children:[(0,d.jsx)("button",{onClick:e.handlePrevPage,disabled:g,children:(0,d.jsx)("svg",{className:"icon-arrow-back",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-arrow-back"})})}),(0,d.jsx)("button",{onClick:e.handleNextPage,disabled:f,children:(0,d.jsx)("svg",{className:"icon-arrow-next",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-arrow-next"})})}),(0,d.jsx)("button",{onClick:e.getInitialData,children:(0,d.jsx)("svg",{className:"icon-redemption",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-redemption"})})})]})]})},k=j,l=function(a){var b=a.asset;return(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"cell first",children:"Owner"}),(0,d.jsxs)("div",{className:"cell second",children:["Collateral ",(0,d.jsxs)("span",{style:{opacity:.5,marginLeft:"4px"},children:[" ",b.toUpperCase()]})]}),(0,d.jsxs)("div",{className:"cell third",children:["Debt ",(0,d.jsx)("span",{style:{opacity:.5,marginLeft:"4px"},children:"DCHF"})]}),(0,d.jsx)("div",{className:"cell fourth",children:"Collateral Ratio"})]})},m=l,n=c(80069),o=function(a){var b=a.trove,c=a.price,e=a.asset,f=function(){navigator.clipboard.writeText(k),j(!0),setTimeout(function(){return j(!1)},1e4)},g=(0,h.useState)(!1),i=g[0],j=g[1],k=null==b?void 0:b.owner,l=+(null==b?void 0:b.coll)/1e18,m=+(null==b?void 0:b.debt)/1e18,o=+(null==b?void 0:b.coll.mul(c[e]).div(null==b?void 0:b.debt))/1e16,p="".concat(k.slice(0,4),"...").concat(k.slice(-4));return(0,d.jsxs)("div",{className:"row",children:[(0,d.jsxs)("div",{className:"cell first",children:[(0,d.jsx)("b",{children:p}),(0,d.jsx)("div",{className:"icon",onClick:f,children:i?(0,d.jsx)("svg",{className:"icon-check",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-check"})}):(0,d.jsx)("svg",{className:"icon-copy",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-copy"})})}),(0,d.jsx)("a",{href:"https://etherscan.com/address/".concat(k),target:"_blank",rel:"noreferrer",className:"icon",children:(0,d.jsx)("svg",{className:"icon-redirect",children:(0,d.jsx)("use",{xlinkHref:"/icons/icons.svg#icon-redirect"})})})]}),(0,d.jsx)("div",{className:"cell second",children:(0,d.jsx)("span",{children:(0,d.jsx)("b",{children:(0,n.x)(l)})})}),(0,d.jsx)("div",{className:"cell third",children:(0,d.jsx)("span",{children:(0,d.jsxs)("b",{children:[(0,n.x)(m)," "]})})}),(0,d.jsx)("div",{className:"cell fourth",children:(0,d.jsx)("span",{children:(0,d.jsxs)("b",{children:[(0,n.x)(o)," %"]})})})]})},p=o,q=c(16766),r=c(10253);function s(a,b){return t.apply(this,arguments)}function t(){return(t=(0,e.Z)(g().mark(function a(b,c){var d,e,f,h,i;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.t0=r.Z,a.next=4,Promise.all([b.multiTroveGetter.getMultipleSortedTroves(c.ETH,-1,1e4),b.multiTroveGetter.getMultipleSortedTroves(c.renBTC,-1,1e4),b.priceFeed.getDirectPrice(c.ETH),b.priceFeed.getDirectPrice(c.renBTC),]);case 4:return a.t1=a.sent,e=(d=(0,a.t0)(a.t1,4))[0],f=d[1],h=d[2],i=d[3],a.abrupt("return",{ethLiquiList:e,btcLiquiList:f,ethPrice:h,btcPrice:i});case 13:return a.prev=13,a.t2=a.catch(0),console.error("fetchTrovesData",a.t2),a.abrupt("return",{ethLiquiList:[],btcLiquiList:[],ethPrice:(0,q.Md)("0"),btcPrice:(0,q.Md)("0")});case 17:case"end":return a.stop()}},a,null,[[0,13]])}))).apply(this,arguments)}var u=function(a){var b=a.setAsset,c=a.asset;return(0,d.jsx)("div",{className:"tabs",children:(0,d.jsx)("div",{className:"dchf-pills",children:(0,d.jsxs)("div",{className:"nav-pills",role:"tablist",children:[(0,d.jsx)("button",{className:"nav-link ".concat("eth"==c?" active":""),"data-bs-toggle":"pill",onClick:function(){return b("eth")},children:"ETH"}),(0,d.jsx)("button",{className:"nav-link ".concat("btc"==c?" active":""),"data-bs-toggle":"pill",onClick:function(){return b("btc")},children:"wBTC"})]})})})},v=20,w={eth:[],btc:[]},x={eth:(0,q.Md)("1"),btc:(0,q.Md)("1")},y=function(){var a=function(){t(function(a){return Math.min(E,a+1)})},b=function(){t(function(a){return Math.max(a-1,0)})},c=(0,h.useState)(w),f=c[0],j=c[1],l=(0,h.useState)(x),n=l[0],o=l[1],q=(0,h.useState)(0),r=q[0],t=q[1],y=(0,h.useState)("eth"),z=y[0],A=y[1],B=(0,i.c)(),C=B.contracts,D=B.addresses,E=Math.floor(f.eth.length/v);function F(){return G.apply(this,arguments)}function G(){return(G=(0,e.Z)(g().mark(function a(){var b;return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,s(C,D);case 2:o({eth:(b=a.sent).ethPrice,btc:b.btcPrice}),j({eth:b.ethLiquiList,btc:b.btcLiquiList});case 5:case"end":return a.stop()}},a)}))).apply(this,arguments)}function H(){return I.apply(this,arguments)}function I(){return(I=(0,e.Z)(g().mark(function a(){return g().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:F();case 1:case"end":return a.stop()}},a)}))).apply(this,arguments)}(0,h.useEffect)(function(){H()},[]);var J=f[z].slice(r*v,(r+1)*v);return(0,d.jsx)("div",{className:"col-md-12 col-lg-12",children:(0,d.jsxs)("div",{className:"troves-info-page",children:[(0,d.jsx)(u,{asset:z,setAsset:A}),(0,d.jsxs)("div",{className:"dchf-troves-info-table",children:[(0,d.jsx)(m,{asset:z}),J.map(function(a){return(0,d.jsx)(p,{trove:a,asset:z,price:n},a.owner)}),(0,d.jsx)(k,{totalTroves:f[z].length,pageIndex:r,actions:{handlePrevPage:b,handleNextPage:a,getInitialData:H},nextPageAvailable:r===E,backPageAvailable:0===r})]})]})})},z=function(){return(0,d.jsx)(y,{})}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=84578)}),_N_E=a.O()}])